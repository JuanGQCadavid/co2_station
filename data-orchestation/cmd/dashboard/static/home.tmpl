<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Station Dashboard</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center; /* Ensures title and button align vertically */
    margin-bottom: 20px;
  }
  .refresh-btn {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
  }
  .row {
    display: grid;
    grid-template-columns: 1.5fr 2fr 1fr 1fr;
    align-items: center;
    gap: 20px;
    padding: 10px 0;
  }
  .station-box {
    background-color: #f0f0f0;
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    font-weight: bold;
    font-size: 18px;
  }
  .data-box {
    display: grid;
    grid-template-columns: repeat(2, auto);
    gap: 5px 20px;
    font-size: 14px;
  }
  .score-box {
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    font-weight: bold;
    font-size: 16px;
    color: #000;
  }
  .score-red {
    background-color: #f8d7da;
  }
  .score-yellow {
    background-color: #fff3cd;
  }
  .score-green {
    background-color: #d4edda;
  }
  .intervene-btn {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    display: block;
    margin: 0 auto;
  }
  hr {
    border: none;
    border-top: 1px dashed #999;
    margin: 10px 0;
  }
</style>
</head>
<body>

<div class="top-bar">
  <h3 style="margin: 0;" >Station Dashboard: (admin / Asdf1234) <a target="_blank" rel="noopener noreferrer" href='http://localhost:8086/signin'>Open.</a></h3>
  <h3 style="margin: 0;" >DB dashboard:  (admin / Asdf1234 / actions) <a target="_blank" rel="noopener noreferrer" href='http://localhost:8080'>Open.</a></h3>
    
  <button class="refresh-btn" onClick="window.location.reload();">Refresh</button>
</div>

{{ range $sensor := .Sensors }}
  <div class="row">
    <div class="station-box">Station {{ $sensor.StationIP }}</div>
    <div class="data-box">
      <div>humidity: {{ $sensor.Humidity }}</div>
      <div>aqi: {{ $sensor.AQI }}</div>
      <div>co2: {{ $sensor.CO2 }}</div>
      <div>voc: {{ $sensor.Tvoc }}</div>
      <div>temperature: {{ $sensor.Temperature }}</div>
    </div>
    <div class="score-box score-red">Score: {{ $sensor.Indicator }}</div>

    <form action="/intervene" method="POST">
        <input type="hidden" name="Station" value="{{ $sensor.StationIP }}">
        <input type="hidden" name="Score" value="{{ $sensor.Indicator }}">
        <button class="intervene-btn" type="submit">intervene</button>
    </form>
    <!-- <button class="intervene-btn">intervene</button> -->
  </div>
  <hr>
{{ end }}


</body>
</html>